#!/bin/bash

# ArbitrageX å®æ—¶ç›‘æ§ç¨‹åºå¯åŠ¨è„šæœ¬

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                                                                    â•‘"
echo "â•‘              ArbitrageX - å°å¸ç§å¥—åˆ©å®æ—¶ç›‘æ§                         â•‘"
echo "â•‘                                                                    â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# æ£€æŸ¥ Go ç¯å¢ƒ
if ! command -v go &> /dev/null; then
    echo "âŒ é”™è¯¯: æœªæ‰¾åˆ° Go ç¯å¢ƒ"
    echo "è¯·å…ˆå®‰è£… Go 1.21+: https://golang.org/dl/"
    exit 1
fi

echo "âœ… Go ç¯å¢ƒ: $(go version)"
echo ""

# è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
cd "$(dirname "$0")/.."

# ç¼–è¯‘ç›‘æ§ç¨‹åº
echo "ğŸ”¨ ç¼–è¯‘ç›‘æ§ç¨‹åº..."
go build -o bin/monitor cmd/monitor/main.go

if [ $? -ne 0 ]; then
    echo "âŒ ç¼–è¯‘å¤±è´¥"
    exit 1
fi

echo "âœ… ç¼–è¯‘æˆåŠŸ"
echo ""

# è¿è¡Œç›‘æ§ç¨‹åº
echo "ğŸš€ å¯åŠ¨ç›‘æ§ç¨‹åº..."
echo ""
./bin/monitor
